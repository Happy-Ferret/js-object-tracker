<!DOCTYPE html>
<meta charset="utf-8">
<script>
//////////////////
// Leak simulation
var listener;
(function scoped() {
  var leak = {foo:"bar"};
  mem.track(leak);
  
  var scopeLeak = leak;
  listener = function scopeLeakFunction() {
    scopeLeak;
  }
  document.addEventListener("load", listener);

  document.refLeak = leak;

  function Foo() {};
  for(var i = 0; i < 2; i++) {
    mem.track(new Foo());
  }
})();
</script>

<pre>
&lt;script>
//////////////////
// Leak simulation
var listener;
(function scoped() {
  var leak = {foo:"bar"};
  mem.track(leak);
  
  var scopeLeak = leak;
  listener = function scopeLeakFunction() {
    scopeLeak;
  }
  document.addEventListener("load", listener);

  document.refLeak = leak;

  function Foo() {};
  for(var i = 0; i < 2; i++) {
    mem.track(new Foo());
  }
})();
&lt;/script>
</pre>
